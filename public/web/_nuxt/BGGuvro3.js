const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BOf5NvKc.js","./o_OcGsLB.js","./DBjGnECu.js","./D-XbLhx8.js","./CoMGTw2w.js","./DSMB-qMT.js","./b-_TUx9i.js","./B22A-h4k.js","./Cfcu-t3n.js","./Di6e_Jmj.js","./CS9wWtgO.js","./BGr3dcAJ.js","./CBooyAK7.js","./XBYuZpdu.js","./MVftVM-X.js","./--UdezPG.js","./BYwSSEjb.js","./BgHJjJs-.js","./gWewHsLF.js","./BaNg8fjw.js","./DlAUqK2U.js","./CfxLE1oh.js","./CyGK14vg.js","./8-c-A7PB.js","./DN9ov8OT.js","./Cpt2kRVT.js","./pUN2d83w.js","./nBDBqKnC.js","./9bDOsXij.js","./BLu746J3.js","./BwTGIg9g.js","./BWWuJQeZ.js","./DNgvVYsj.js","./BYK_1AlN.js","./BJ_E6Ph7.js","./B128ot1i.js","./CP4Zo7YT.js","./XpsTG8vq.js","./BUyfW8JT.js","./DaWZu8wl.js"])))=>i.map(i=>d[i]);
import{d as ee,b as ae,Q as se,aq as oe,s as te,aM as le,a1 as ne,aK as ie,i as re,c as v,o as n,q as l,l as i,p as s,A as ce,H as de,k as g,x as me,_ as pe,F as U,B as V,v as w,bs as ue,j as u,t as x,C as _e,y as fe,bE as ge,R as I,U as k}from"#entry";import{_ as he}from"./CbuHra-u.js";import be from"./--UdezPG.js";import{_ as ve}from"./BpyZLjzh.js";import{_ as ye}from"./CBooyAK7.js";import{_ as Ee}from"./CeJbzRjl.js";import{_ as we}from"./ByDcNyZR.js";import{_ as xe}from"./B3ZBHMjU.js";import{a as T,b as _,E as p}from"./XBYuZpdu.js";import{g as Ie,h as ke,i as Te,j as Ae,k as Le}from"./CS9wWtgO.js";import{u as Ne}from"./FihYtau-.js";import"./8-c-A7PB.js";import"./B22A-h4k.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./9bDOsXij.js";import"./DN9ov8OT.js";import"./Y5xxW4ru.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Cfcu-t3n.js";import"./BstbYvQo.js";import"./Bub1HYiY.js";import"./lw_U4-W2.js";import"./XpsTG8vq.js";import"./CqTMLIrD.js";import"./kRIii9yh.js";import"./C6Y-ieo6.js";import"./Dn8X9Gvz.js";import"./DlAUqK2U.js";const De={class:"extension-manage-container flex h-full flex-col pb-5"},Ue={class:"header bg-background sticky top-0 z-10 pb-6"},Ve={class:"space-y-4"},$e={class:"flex w-full flex-wrap justify-between gap-4"},Be={class:"flex items-end justify-end"},Ce={class:"flex items-center gap-4"},Se={class:"grid h-[calc(100vh-12rem)]"},Pe={class:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},Oe={class:"flex h-full w-full cursor-pointer flex-col gap-3.5 p-4"},Re={class:"flex justify-between"},ze={class:"flex w-[calc(100%-76px)] flex-col gap-1"},Fe={class:"flex items-center gap-1"},Me={class:"text-foreground truncate text-[16px] leading-[22px] font-[500]"},je={class:"text-muted-foreground line-clamp-2 text-[14px] leading-[20px] font-normal wrap-break-word"},We={class:"ml-[12px] h-[64px] w-[64px] flex-none overflow-hidden rounded-[10px]"},qe={class:"flex items-center gap-2"},He={class:"flex items-center gap-1 text-xs"},Xe={class:"text-nowrap"},Ge={class:"bg-background absolute right-3 bottom-3 flex gap-2"},Aa=ee({__name:"list",setup(Ke){const $=I(()=>k(()=>import("./BOf5NvKc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),B=I(()=>k(()=>import("./BGr3dcAJ.js"),__vite__mapDeps([11,1,12,2,3,4,5,6,7,8,9,13,10]),import.meta.url)),C=I(()=>k(()=>import("./MVftVM-X.js"),__vite__mapDeps([14,15,1,16,17,18,19,20,21,22,23,24,25,26,27,28,7,29,30,31,32,33,34,5,6,8,35,4,36,37,13,10,38,39]),import.meta.url)),{t:o}=ae(),y=se(),r=oe(),S=[{label:o("extensions.manage.tabs.all"),value:"all"},{label:o("extensions.manage.tabs.installed"),value:"installed"},{label:o("extensions.manage.tabs.uninstalled"),value:"uninstalled"}],f=te("all"),d=le({type:void 0}),P=a=>({[p.WEB]:o("extensions.modal.terminalTypes.web"),[p.WEIXIN]:o("extensions.modal.terminalTypes.weixin"),[p.H5]:o("extensions.modal.terminalTypes.h5"),[p.MP]:o("extensions.modal.terminalTypes.mp"),[p.API]:o("extensions.modal.terminalTypes.api")})[a]||"未知",{paging:O,getLists:c}=Ne({fetchFun:Ie,params:d}),R=de(()=>{c()},500),z=a=>{f.value=String(a);const t=f.value;t==="all"?delete d.isInstalled:d.isInstalled=t==="installed",c()},F=a=>{console.log("handleNavigate",a),window.open(`${ge.EXTENSIONS}/${a.identifier}/buildingai-middleware`,"_self")},h=ne({}),M=async a=>{if(!h[a.identifier])try{h[a.identifier]=!0,await Le(a.identifier),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("安装插件失败:",t),r.error(o("console-common.messages.failed"))}finally{h[a.identifier]=!1}},{lockFn:j}=ie(async a=>{try{await Ae(a.identifier),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("卸载插件失败:",t),r.error(o("console-common.messages.failed"))}}),W=async a=>{try{await ke(a.id),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("启用插件失败:",t),r.error(o("console-common.messages.failed"))}},q=async a=>{try{await Te(a.id),await c(),r.success(o("console-common.messages.success"))}catch(t){console.error("禁用插件失败:",t),r.error(o("console-common.messages.failed"))}},A=async(a,t)=>{await y.create(C).open({isEdit:t,id:a.id,initialData:{name:a.name,packName:a.identifier,description:a.description,version:a.version,icon:a.icon,type:a.type,supportTerminal:a.supportTerminal||[],author:a.author||{avatar:"",name:"",homepage:""}}}).result&&c()},H=a=>{y.create(B).open({isIdentifier:a.isLocal,extensionId:a.id,identifier:a.identifier})},X=a=>{y.create($).open({extension:a,identifier:a.identifier})};return re(()=>c()),(a,t)=>{const L=he,N=be,D=ve,b=pe,G=ue,E=ye,K=fe,Q=_e,J=Ee,Y=we,Z=xe;return n(),v("div",De,[l("div",Ue,[l("div",Ve,[l("div",$e,[l("div",Be,[i(L,{items:S,modelValue:s(f),"onUpdate:modelValue":[t[0]||(t[0]=e=>ce(f)?f.value=e:null),z],class:"block w-auto"},null,8,["modelValue"])]),l("div",Ce,[i(N,{modelValue:s(d).name,"onUpdate:modelValue":[t[1]||(t[1]=e=>s(d).name=e),s(R)],placeholder:s(o)("extensions.manage.search")},null,8,["modelValue","placeholder","onUpdate:modelValue"]),i(D,{modelValue:s(d).type,"onUpdate:modelValue":t[2]||(t[2]=e=>s(d).type=e),items:[{label:"全部",value:void 0},{label:"应用插件",value:s(T).APPLICATION},{label:"功能插件",value:s(T).FUNCTIONAL}],class:"block w-auto",placeholder:"请选择插件类型"},null,8,["modelValue","items"]),i(b,{icon:"i-lucide-plus",color:"primary",onClick:t[3]||(t[3]=e=>A({},!1))},{default:g(()=>[...t[4]||(t[4]=[me(" 新增插件 ",-1)])]),_:1})])])])]),l("div",Se,[i(Z,{class:"h-full",shadow:!1},{default:g(()=>[l("div",Pe,[(n(!0),v(U,null,V(s(O).items,e=>(n(),v("div",{key:e.id,class:"bg-background border-muted relative h-[170px] overflow-hidden rounded-[6px] border border-solid transition duration-150 ease-out hover:shadow-[0_6px_8px_0_rgba(28,31,35,6%)]"},[l("div",Oe,[l("div",Re,[l("div",ze,[l("div",Fe,[l("span",Me,w(e.name),1)]),l("span",je,w(e.description||"暂无描述"),1)]),l("div",We,[i(G,{src:e.icon,alt:e.name,class:"h-full w-full object-cover",loading:"lazy"},null,8,["src","alt"])])]),l("div",qe,[e.version?(n(),u(E,{key:0,color:"neutral",variant:"soft",label:`v${e.version}`},null,8,["label"])):x("",!0),e.isInstalled?(n(),u(E,{key:1,color:e.status===s(_).ENABLED?"success":"neutral",variant:"soft",label:e.status===s(_).ENABLED?s(o)("extensions.manage.enable"):s(o)("extensions.manage.disable")},null,8,["color","label"])):x("",!0),(n(!0),v(U,null,V(e.supportTerminal,m=>(n(),u(E,{color:m===s(p).WEB?"success":m===s(p).API?"info":"neutral",variant:"soft",label:P(m)},null,8,["color","label"]))),256))]),l("div",He,[i(Q,{color:"primary",size:"xs",src:e.author?.avatar,ui:{root:"rounded-full bg-primary size-5"}},{default:g(()=>[i(K,{name:"i-lucide-user",class:"size-3 text-white"})]),_:1},8,["src"]),l("div",Xe,w(e.author.name||"未知作者"),1)]),l("div",Ge,[e.type===s(T).APPLICATION&&e.isInstalled?(n(),u(J,{key:0,text:s(o)("extensions.manage.manage")},{default:g(()=>[i(b,{color:"primary",variant:"ghost",size:"sm",label:s(o)("extensions.manage.manage"),onClick:m=>F(e)},null,8,["label","onClick"])]),_:2},1032,["text"])):x("",!0),e.isInstalled?(n(),u(Y,{key:2,items:[[{label:s(o)("extensions.manage.detail"),icon:"i-lucide-info",onSelect:()=>H(e)},{label:s(o)("extensions.manage.logs"),icon:"i-lucide-file-text",onSelect:()=>X(e)}],[{label:e.status===s(_).ENABLED?s(o)("extensions.manage.disable"):s(o)("extensions.manage.enable"),icon:e.status===s(_).ENABLED?"i-lucide-power-off":"i-lucide-power",color:e.status===s(_).ENABLED?"warning":"success",onSelect:()=>{e.status===s(_).ENABLED?q(e):W(e)}}],[e.isLocal?{label:s(o)("console-common.edit"),icon:"i-lucide-pen-line",onSelect:()=>A(e,!0)}:void 0,{label:s(o)("extensions.manage.uninstall"),icon:"i-lucide-trash-2",color:"error",onSelect:()=>{s(j)(e)}}].filter(m=>m!==void 0)],content:{align:"end",side:"bottom",sideOffset:4},ui:{content:"w-32"}},{default:g(()=>[i(b,{icon:"i-lucide-ellipsis-vertical",color:"neutral",variant:"ghost",size:"sm"})]),_:1},8,["items"])):(n(),u(b,{key:1,color:"primary",variant:"ghost",size:"sm",loading:s(h)[e.identifier],label:a.$t("extensions.manage.install"),onClick:m=>M(e)},null,8,["loading","label","onClick"]))])])]))),128))])]),_:1})])])}}});export{Aa as default};
