import{_ as B}from"./CbuHra-u.js";import N from"./--UdezPG.js";import{_ as z}from"./BYwSSEjb.js";import{_ as E}from"./BdM25oR7.js";import{d as M,b as R,aq as W,s as g,aM as A,aK as T,i as D,c as u,o as d,q as V,l as a,p as t,A as G,k as l,t as I,F as f,_ as K,x as k,v as U}from"#entry";import{_ as j}from"./CJG2iIES.js";import{_ as H}from"./DNgvVYsj.js";import{a as J,b as O}from"./Z7RT5dpM.js";import"./8-c-A7PB.js";import"./B22A-h4k.js";import"./Cpt2kRVT.js";import"./pUN2d83w.js";import"./9bDOsXij.js";import"./CBooyAK7.js";import"./BgHJjJs-.js";import"./ByDcNyZR.js";import"./CqTMLIrD.js";import"./kRIii9yh.js";import"./Y5xxW4ru.js";import"./Cfcu-t3n.js";import"./C6Y-ieo6.js";import"./b-_TUx9i.js";import"./DaNf1Wdt.js";import"./CKXZhss7.js";import"./Bub1HYiY.js";import"./lw_U4-W2.js";import"./XpsTG8vq.js";import"./DyWX1Ime.js";import"./BMSQkwth.js";import"./DaWZu8wl.js";import"./8nwS_hHr.js";const P={class:"agreement-container relative"},Q={class:"mb-4 inline-block w-auto"},X={class:"flex space-x-3 pt-4"},qe=M({__name:"index",setup(Y){const{t:s}=R(),p=W(),r=g("0"),x=g([{label:s("system.website.agreement.privacy")},{label:s("system.website.agreement.service")},{label:s("system.website.agreement.payment")}]),e=A({privacyTitle:"",privacyContent:"",serviceTitle:"",serviceContent:"",paymentTitle:"",paymentContent:""}),m=g(null),{lockFn:C,isLock:_}=T(async()=>{try{const n=await J();m.value=n,e.privacyTitle=n.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=n.agreement.privacyContent||"",e.serviceTitle=n.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=n.agreement.serviceContent||"",e.paymentTitle=n.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=n.agreement.paymentContent||""}catch(n){console.error("Get website config failed:",n),p.error(s("system.website.messages.loadFailed"))}}),{lockFn:F,isLock:y}=T(async()=>{try{const n={agreement:{privacyTitle:e.privacyTitle,privacyContent:e.privacyContent,serviceTitle:e.serviceTitle,serviceContent:e.serviceContent,paymentTitle:e.paymentTitle,paymentContent:e.paymentContent}};await O(n),p.success(s("system.website.messages.saveSuccess")),await C()}catch(n){console.error("Save failed:",n),p.error(s("system.website.messages.saveFailed"))}}),L=()=>{m.value?(e.privacyTitle=m.value.agreement.privacyTitle||s("system.website.agreement.privacy"),e.privacyContent=m.value.agreement.privacyContent||"",e.serviceTitle=m.value.agreement.serviceTitle||s("system.website.agreement.service"),e.serviceContent=m.value.agreement.serviceContent||"",e.paymentTitle=m.value.agreement.paymentTitle||s("system.website.agreement.payment"),e.paymentContent=m.value.agreement.paymentContent||"",p.info(s("system.website.messages.resetSuccess"))):(e.privacyTitle=s("system.website.agreement.privacy"),e.privacyContent="",e.serviceTitle=s("system.website.agreement.service"),e.serviceContent="",e.paymentTitle=s("system.website.agreement.payment"),e.paymentContent="",p.info(s("system.website.messages.resetEmpty")))};return D(()=>C()),(n,i)=>{const q=B,v=N,c=z,b=E,w=K,S=j,$=H;return d(),u("div",P,[V("div",Q,[a(q,{modelValue:t(r),"onUpdate:modelValue":i[0]||(i[0]=o=>G(r)?r.value=o:null),items:t(x)},null,8,["modelValue","items"])]),a($,{state:t(e),onSubmit:t(F)},{default:l(()=>[t(r)==="0"?(d(),u(f,{key:0},[a(c,{name:"privacyTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).privacyTitle,"onUpdate:modelValue":i[1]||(i[1]=o=>t(e).privacyTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"privacyContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:l(()=>[a(b,{modelValue:t(e).privacyContent,"onUpdate:modelValue":i[2]||(i[2]=o=>t(e).privacyContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="1"?(d(),u(f,{key:1},[a(c,{name:"serviceTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).serviceTitle,"onUpdate:modelValue":i[3]||(i[3]=o=>t(e).serviceTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"serviceContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:l(()=>[a(b,{modelValue:t(e).serviceContent,"onUpdate:modelValue":i[4]||(i[4]=o=>t(e).serviceContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):t(r)==="2"?(d(),u(f,{key:2},[a(c,{name:"paymentTitle",label:t(s)("system.website.agreement.titleLabel"),required:""},{default:l(()=>[a(v,{modelValue:t(e).paymentTitle,"onUpdate:modelValue":i[5]||(i[5]=o=>t(e).paymentTitle=o),size:"xl",ui:{root:"w-full"}},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{name:"paymentContent",label:t(s)("system.website.agreement.contentLabel"),class:"mt-4",required:""},{default:l(()=>[a(b,{modelValue:t(e).paymentContent,"onUpdate:modelValue":i[6]||(i[6]=o=>t(e).paymentContent=o)},null,8,["modelValue"])]),_:1},8,["label"])],64)):I("",!0),V("div",X,[a(S,{codes:["system-website:setConfig"]},{default:l(()=>[a(w,{type:"submit",color:"primary",loading:t(y),disabled:t(y)||t(_)},{default:l(()=>[k(U(t(y)?t(s)("system.website.actions.saving"):t(s)("system.website.actions.saveChanges")),1)]),_:1},8,["loading","disabled"])]),_:1}),a(w,{type:"reset",color:"neutral",variant:"outline",disabled:t(y)||t(_),onClick:L},{default:l(()=>[k(U(t(s)("system.website.actions.reset")),1)]),_:1},8,["disabled"])])]),_:1},8,["state","onSubmit"])])}}});export{qe as default};
